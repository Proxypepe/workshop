**Шаги алгоритма асимметричного шифрования:**

1. **Генерация ключевой пары**:
    - Получатель генерирует ключевую пару, состоящую из открытого и закрытого ключей. Закрытый ключ остается в секрете, а открытый ключ может быть свободно распространен.
2. **Получение открытого ключа**:
    - Получатель отправляет свой открытый ключ отправителю или публикует его в общедоступном месте.
3. **Шифрование данных**:
    - Отправитель использует открытый ключ получателя для шифрования данных и создания шифрованного сообщения (шифротекста).
4. **Передача данных**:
    - Шифротекст отправляется по открытому каналу связи до получателя.
5. **Расшифрование данных**:
    - Получатель использует свой закрытый ключ для расшифрования шифротекста и восстановления исходного текста.
6. **Очистка ключей**:
    - Закрытый ключ получателя остается в его секрете и не раскрывается. Открытый ключ может оставаться неизменным.


![[Pasted image 20230911003141.png]]

![[Pasted image 20230911003248.png]]

Сертификаты

1. **PFX (Personal Information Exchange)**: PFX, также известный как PKCS #12, это формат файла, используемый для хранения закрытых ключей и соответствующих им сертификатов в зашифрованном контейнере. PFX-файлы часто используются в операционных системах Windows для экспорта и импорта сертификатов и закрытых ключей.
2. **CA (Certificate Authority)**: Это организация или учреждение, которое выпускает цифровые сертификаты. CA выполняет проверку личности (аутентификацию) владельца сертификата и подтверждает, что открытый ключ, указанный в сертификате, принадлежит этому владельцу. CA может быть общедоступным (публичным) или частным (внутренним).
3. **PEM (Privacy Enhanced Mail)**: PEM - это формат файлового контейнера, который может содержать различные объекты, включая сертификаты, закрытые ключи и другие криптографические данные. PEM-файлы используются для хранения и передачи информации в человекочитаемом текстовом формате, который часто заключается внутри "-----BEGIN ...-----" и "-----END ...-----" меток.
4. **Private Key (Закрытый ключ)**: Закрытый ключ - это секретный ключ, который используется для дешифрования данных, создания цифровых подписей и аутентификации. Он должен оставаться строго секретным и недоступным для посторонних лиц.
5. **Public Key (Открытый ключ)**: Открытый ключ - это соответствующая пара открытого ключа закрытому ключу. Он используется для проверки цифровых подписей, зашифрования данных и аутентификации. Открытый ключ может быть распространен и использоваться для шифрования данных, которые только соответствующий закрытый ключ может расшифровать.
6. **Key Pair (Пара ключей)**: Пара ключей состоит из открытого и закрытого ключей. Эти ключи математически связаны друг с другом и используются в криптографии для различных целей, включая шифрование, дешифрование и создание цифровых подписей.
7. Формат JKS (Java KeyStore) представляет собой стандартный формат хранилища ключей и сертификатов, который используется в платформе Java для управления цифровыми ключами и сертификатами. JKS-хранилище может содержать как закрытые (приватные) ключи, так и соответствующие им сертификаты, а также другие секретные данные, такие как пароли.
7.1. **Структура JKS**:
    - JKS-файл представляет собой двоичный файл, который может быть защищен паролем.
    - Он может содержать несколько записей (entries), каждая из которых представляет собой пару закрытого ключа и соответствующего сертификата (или цепочку сертификатов).
    - Каждая запись имеет уникальное имя (alias), по которому можно обращаться к ключу и сертификату.
7.2. **Содержимое JKS**:
    - Закрытые ключи: JKS может хранить закрытые ключи вместе с соответствующими им сертификатами. Это позволяет обеспечивать целостность и безопасность ключей.
    - Сертификаты: JKS может содержать сертификаты, такие как X.509 сертификаты, которые используются для аутентификации и шифрования.
    - Другие данные: JKS также может содержать другие секретные данные, такие как пароли, которые могут быть использованы для доступа к хранилищу ключей.
Симметричное и ассиметричное шифрование

**Шаги алгоритма симметричного шифрования:**

1. **Генерация секретного ключа**:
    - Отправитель и получатель обеих сторон должны согласиться на секретный ключ (общий секрет), который будет использоваться для шифрования и расшифрования данных.
2. **Шифрование данных**:
    - Отправитель использует секретный ключ для шифрования данных. Обычно это выполняется с использованием симметричных алгоритмов шифрования, таких как AES.
    - Зашифрованные данные называются шифротекстом.
3. **Передача данных**:
    - Шифротекст отправляется по открытому каналу связи до получателя.
4. **Расшифрование данных**:
    - Получатель использует тот же секретный ключ для расшифрования данных и восстановления исходного текста.
5. **Очистка ключа**:
    - После завершения передачи данных секретный ключ может быть уничтожен или очищен.

## Введение
В Java есть инструмент keytool, который позволяет выполнять стандартные задачи, например


1. Генерируйте ключи RSA и самоподписанные сертификаты SSL.
2. Импортные и экспортные сертификаты
3. Распечатать информацию о сертификате
4. Создание и подписание запросов на подпись сертификата
Он также хранит все в защищенном файле, который имеет главный пароль в дополнение к конкретным паролям для каждого хранимого ключа. Вы можете думать об этом как о небольшой базе данных SQLite, защищенной паролем, с вашими ключами и сертификатами.

1. **Создание нового хранилища ключей (JKS)**:
    
    `keytool -genkeypair -alias mykey -keyalg RSA -keystore keystore.jks`
    
    Эта команда создает новую пару ключей (открытый и закрытый ключ) и сохраняет их в новом файле хранилища ключей `keystore.jks`.
    
2. **Создание запроса на подпись сертификата (CSR)**:
    
    `keytool -certreq -alias mykey -keystore keystore.jks -file mykey.csr`
    
    Эта команда создает запрос на подпись сертификата (CSR) на основе закрытого ключа из хранилища и сохраняет его в файл `mykey.csr`.
    
3. **Импорт сертификата в хранилище ключей (JKS)**:
    
    `keytool -import -alias ca -file cacert.cer -keystore keystore.jks`
    
    Эта команда импортирует сертификат из файла `cacert.cer` в хранилище ключей `keystore.jks` с алиасом `ca`.
    
4. **Просмотр содержимого хранилища ключей (JKS)**:
    `keytool -list -keystore keystore.jks`
    
    Эта команда отображает список записей (ключей и сертификатов) в хранилище ключей `keystore.jks`.
    
5. **Экспорт сертификата из хранилища ключей (JKS)**:
    `keytool -export -alias mykey -file mykey.cer -keystore keystore.jks`
    
    Эта команда экспортирует сертификат с алиасом `mykey` из хранилища ключей `keystore.jks` в файл `mykey.cer`.
    
6. **Импорт сертификата в доверенное хранилище (cacerts)**:
    `keytool -import -trustcacerts -alias mykey -file mykey.cer -keystore cacerts`
    
    Эта команда импортирует сертификат с алиасом `mykey` из файла `mykey.cer` в доверенное хранилище `cacerts`, которое используется для доверия корневым сертификатам.
    
7. **Удаление ключа или сертификата из хранилища ключей (JKS)**:
    `keytool -delete -alias mykey -keystore keystore.jks`
    
    Эта команда удаляет ключ или сертификат с алиасом `mykey` из хранилища ключей `keystore.jks`.
    
8. **Импорт ключей и сертификатов из PKCS #12 (PFX) файла**:
    `keytool -importkeystore -srckeystore mypfx.pfx -srcstoretype PKCS12 -destkeystore keystore.jks -deststoretype JKS`
    
    Эта команда импортирует ключи и сертификаты из PKCS #12 файла `mypfx.pfx` в хранилище ключей `keystore.jks`.
9. **Импорт корневого сертификата в хранилище ключей (JKS)**:
    `keytool -importcert -alias rootca -file rootca.cer -keystore keystore.jks`
    
    Эта команда импортирует корневой сертификат (например, центра сертификации) из файла `rootca.cer` в хранилище ключей `keystore.jks` с алиасом `rootca`.
    
10. **Изменение пароля для хранилища ключей (JKS)**:
    `keytool -storepasswd -keystore keystore.jks`
    
    Эта команда позволяет изменить пароль для доступа к хранилищу ключей `keystore.jks`.
    
11. **Создание нового хранилища ключей (PKCS #12, PFX)**:
    `keytool -genkeypair -alias mykey -keyalg RSA -storetype PKCS12 -keystore keystore.pfx`
    
    Эта команда создает новую пару ключей и сохраняет их в новом PKCS #12 (PFX) файле `keystore.pfx`.
    
12. **Создание нового хранилища ключей с определенным размером ключа (RSA)**:
    `keytool -genkeypair -alias mykey -keyalg RSA -keysize 2048 -keystore keystore.jks`
    
    Эта команда создает новую пару ключей с размером 2048 бит и сохраняет их в хранилище ключей `keystore.jks`.
    
13. **Генерация самоподписанного сертификата**:
    `keytool -genkeypair -alias mykey -keyalg RSA -keystore keystore.jks -selfcert`
    
    Эта команда создает самоподписанный сертификат для ключа с алиасом `mykey` и сохраняет его в хранилище ключей `keystore.jks`.
    
14. **Создание бэкапа хранилища ключей (JKS)**:
    `keytool -importkeystore -srckeystore keystore.jks -destkeystore keystore_backup.jks -deststoretype JKS`
    
    Эта команда создает бэкап хранилища ключей `keystore.jks` и сохраняет его как `keystore_backup.jks`.
    
15. **Просмотр информации о сертификате**:
    `keytool -printcert -file mycert.cer`
    
    Эта команда выводит информацию о сертификате из файла `mycert.cer`.